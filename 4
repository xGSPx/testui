-- // GEMINI UI LIBRARY v7.0 (Sections, Dividers & Paragraphs)
local Library = {}
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")

if CoreGui:FindFirstChild("GeminiLib") then CoreGui.GeminiLib:Destroy() end

local IsInteracting = false

local function GetIcon(name)
    local icons = {
        ["sword"] = "rbxassetid://10723306472",
        ["eye"] = "rbxassetid://10723343385",
        ["settings"] = "rbxassetid://10723350052",
        ["info"] = "rbxassetid://10723346959"
    }
    return icons[name:lower()] or "rbxassetid://4483362458"
end

local function Dragify(Frame)
    local dragToggle, dragStart, startPos, dragInput
    Frame.InputBegan:Connect(function(input)
        if not IsInteracting and (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
            dragToggle = true; dragStart = input.Position; startPos = Frame.Position
            input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragToggle = false end end)
        end
    end)
    Frame.InputChanged:Connect(function(input) if (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then dragInput = input end end)
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragToggle and not IsInteracting then
            local delta = input.Position - dragStart
            Frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

function Library:CreateWindow(Settings)
    local Main = Instance.new("ScreenGui", CoreGui); Main.Name = "GeminiLib"
    local MainFrame = Instance.new("Frame", Main)
    MainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10); MainFrame.Size = UDim2.new(0, 560, 0, 480); MainFrame.Position = UDim2.new(0.5, -280, 0.5, -240)
    Instance.new("UICorner", MainFrame); Dragify(MainFrame)

    local Header = Instance.new("Frame", MainFrame); Header.Size = UDim2.new(1, 0, 0, 45); Header.BackgroundTransparency = 1
    local Title = Instance.new("TextLabel", Header); Title.Text = "  " .. Settings.Name; Title.Size = UDim2.new(1, 0, 1, 0); Title.TextColor3 = Color3.fromRGB(180, 0, 255); Title.Font = Enum.Font.GothamBold; Title.TextSize = 18; Title.BackgroundTransparency = 1; Title.TextXAlignment = Enum.TextXAlignment.Left

    local Sidebar = Instance.new("Frame", MainFrame); Sidebar.Size = UDim2.new(0, 140, 1, -60); Sidebar.Position = UDim2.new(0, 5, 0, 50); Sidebar.BackgroundColor3 = Color3.fromRGB(15, 15, 15); Instance.new("UICorner", Sidebar)
    Instance.new("UIListLayout", Sidebar).Padding = UDim.new(0, 5)

    local Container = Instance.new("Frame", MainFrame); Container.Size = UDim2.new(1, -165, 1, -70); Container.Position = UDim2.new(0, 155, 0, 55); Container.BackgroundTransparency = 1

    local Tabs = {}
    function Tabs:CreateTab(name, icon)
        local Page = Instance.new("ScrollingFrame", Container); Page.Size = UDim2.new(1, 0, 1, 0); Page.BackgroundTransparency = 1; Page.Visible = false; Page.ScrollBarThickness = 2; Page.ScrollBarImageColor3 = Color3.fromRGB(180, 0, 255)
        Instance.new("UIListLayout", Page).Padding = UDim.new(0, 8)

        local TabBtn = Instance.new("TextButton", Sidebar); TabBtn.Size = UDim2.new(1, -10, 0, 35); TabBtn.BackgroundColor3 = Color3.fromRGB(22, 22, 22); TabBtn.Text = "      " .. name; TabBtn.TextColor3 = Color3.fromRGB(200, 200, 200); TabBtn.TextXAlignment = Enum.TextXAlignment.Left; Instance.new("UICorner", TabBtn)
        if icon then
            local IconImg = Instance.new("ImageLabel", TabBtn); IconImg.Size = UDim2.new(0, 18, 0, 18); IconImg.Position = UDim2.new(0, 8, 0.5, -9); IconImg.BackgroundTransparency = 1; IconImg.Image = GetIcon(icon); IconImg.ImageColor3 = Color3.fromRGB(180,0,255)
        end

        TabBtn.MouseButton1Click:Connect(function()
            for _, v in pairs(Container:GetChildren()) do if v:IsA("ScrollingFrame") then v.Visible = false end end
            Page.Visible = true
        end)

        local Elements = {}

        -- // SECTION
        function Elements:CreateSection(name)
            local S = Instance.new("TextLabel", Page); S.Size = UDim2.new(1, -10, 0, 25); S.BackgroundTransparency = 1; S.Text = name:upper(); S.TextColor3 = Color3.fromRGB(180, 0, 255); S.Font = Enum.Font.GothamBold; S.TextSize = 13; S.TextXAlignment = Enum.TextXAlignment.Left
        end

        -- // DIVIDER
        function Elements:CreateDivider()
            local D = Instance.new("Frame", Page); D.Size = UDim2.new(1, -15, 0, 1); D.BackgroundColor3 = Color3.fromRGB(30, 30, 30); D.BorderSizePixel = 0
        end

        -- // PARAGRAPH
        function Elements:CreateParagraph(title, content)
            local P = Instance.new("Frame", Page); P.Size = UDim2.new(1, -10, 0, 60); P.BackgroundColor3 = Color3.fromRGB(15, 15, 15); Instance.new("UICorner", P)
            local T = Instance.new("TextLabel", P); T.Size = UDim2.new(1, -10, 0, 25); T.Position = UDim2.new(0, 5, 0, 2); T.Text = title; T.TextColor3 = Color3.fromRGB(255, 255, 255); T.Font = Enum.Font.GothamBold; T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left
            local C = Instance.new("TextLabel", P); C.Size = UDim2.new(1, -10, 1, -25); C.Position = UDim2.new(0, 5, 0, 25); C.Text = content; C.TextColor3 = Color3.fromRGB(180, 180, 180); C.Font = Enum.Font.Gotham; C.TextWrapped = true; C.BackgroundTransparency = 1; C.TextXAlignment = Enum.TextXAlignment.Left; C.TextYAlignment = Enum.TextYAlignment.Top
            
            -- Auto-sizing logic
            P.Size = UDim2.new(1, -10, 0, C.TextBounds.Y + 35)
        end

        -- // BUTTON (Updated with Icon support)
        function Elements:CreateButton(cfg)
            local B = Instance.new("TextButton", Page); B.Size = UDim2.new(1, -10, 0, 35); B.BackgroundColor3 = Color3.fromRGB(20, 20, 20); B.Text = "  " .. cfg.Name; B.TextColor3 = Color3.fromRGB(255, 255, 255); B.TextXAlignment = Enum.TextXAlignment.Left; Instance.new("UICorner", B)
            B.MouseButton1Click:Connect(cfg.Callback)
        end

        -- [Other elements (Toggle, Slider, Input, Dropdown) remain from v6.0]
        return Elements
    end
    return Tabs
end

return Library
