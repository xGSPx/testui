local Library = {}
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")

function Library:CreateWindow(Settings)
    local Main = Instance.new("ScreenGui", CoreGui)
    Main.Name = "GeminiLib"
    
    local MainFrame = Instance.new("Frame", Main)
    MainFrame.BackgroundColor3 = Color3.fromRGB(12, 12, 12)
    MainFrame.Size = UDim2.new(0, 520, 0, 380)
    MainFrame.Position = UDim2.new(0.5, -260, 0.5, -190)
    Instance.new("UICorner", MainFrame)

    -- Neon Purple Border
    local Border = Instance.new("Frame", MainFrame)
    Border.Size = UDim2.new(1, 2, 1, 2)
    Border.Position = UDim2.new(0, -1, 0, -1)
    Border.BackgroundColor3 = Color3.fromRGB(180, 0, 255)
    Border.ZIndex = 0
    Instance.new("UICorner", Border)

    local Content = Instance.new("Frame", MainFrame)
    Content.Size = UDim2.new(1, -160, 1, -20)
    Content.Position = UDim2.new(0, 150, 0, 10)
    Content.BackgroundTransparency = 1
    Instance.new("UIListLayout", Content).Padding = UDim.new(0, 8)

    local Tabs = {}
    function Tabs:CreateTab(name)
        local Elements = {}

        -- DROPDOWN ELEMENT
        function Elements:CreateDropdown(cfg)
            local Dropped = false
            local DropFrame = Instance.new("Frame", Content)
            DropFrame.Size = UDim2.new(1, -10, 0, 35)
            DropFrame.BackgroundColor3 = Color3.fromRGB(22, 22, 22)
            DropFrame.ClipsDescendants = true
            Instance.new("UICorner", DropFrame)

            local ToggleBtn = Instance.new("TextButton", DropFrame)
            ToggleBtn.Size = UDim2.new(1, 0, 0, 35)
            ToggleBtn.BackgroundTransparency = 1
            ToggleBtn.Text = "  " .. cfg.Name .. " : " .. (cfg.CurrentOption or "None")
            ToggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
            ToggleBtn.TextXAlignment = Enum.TextXAlignment.Left

            ToggleBtn.MouseButton1Click:Connect(function()
                Dropped = not Dropped
                TweenService:Create(DropFrame, TweenInfo.new(0.3), {Size = Dropped and UDim2.new(1, -10, 0, 150) or UDim2.new(1, -10, 0, 35)}):Play()
            end)

            for _, option in pairs(cfg.Options) do
                local OptBtn = Instance.new("TextButton", DropFrame)
                OptBtn.Size = UDim2.new(1, 0, 0, 25)
                OptBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
                OptBtn.Text = option
                OptBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
                
                OptBtn.MouseButton1Click:Connect(function()
                    ToggleBtn.Text = "  " .. cfg.Name .. " : " .. option
                    cfg.Callback(option)
                    Dropped = false
                    DropFrame.Size = UDim2.new(1, -10, 0, 35)
                end)
            end
        end

        function Elements:CreateToggle(cfg) 
            -- (Keep your previous toggle code here)
        end
        
        return Elements
    end
    return Tabs
end

return Library
